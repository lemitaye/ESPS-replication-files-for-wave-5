ess4_hh_psnp <- read_dta(file.path(root, w4_dir, "ess4_hh_psnp.dta"))
root
# declare paths ----
root <- "C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5"
w4_dir <- "supplemental/replication_files/3_report_data"
w5_dir <- "3_report_data"
root
# load data -----
ess4_hh_psnp <- read_dta("../supplemental/replication_files/3_report_data/ess4_hh_psnp.dta")
library(haven)
library(tidyverse)
library(labelled)
library(janitor)
# load data -----
ess4_hh_psnp <- read_dta("../supplemental/replication_files/3_report_data/ess4_hh_psnp.dta")
ess4_hh_psnp
sect14_hh_w4 <- read_dta("../supplemental/replication_files/2_raw_data/ESS4_2018-19/Data/sect14_hh_w4.dta")
sect14_hh_w4
ess5_hh_psnp <- read_dta("../3_report_data/ess5_hh_psnp.dta") %>%
mutate(wave = "Wave 5")
ess5_hh_psnp
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
collapse_ea_psnp <- function(tbl, group_vars = c("variable", "region")) {
tbl %>%
summarise(
# n = n(),
across(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
~max(.x, na.rm = TRUE) ),
.groups = "drop"
) %>%
suppressWarnings() %>%
modify(~ifelse(is.infinite(.), 0, .)) %>%
rename_with(~str_replace(., "hhd_", "ead_"), starts_with("hhd_")) %>%
pivot_longer(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
names_to = "variable", values_to = "value") %>%
group_by(pick(group_vars)) %>%
summarise(
mean = mean(value, na.rm = TRUE),
nobs = sum(!is.na(value)),
.groups = "drop"
)
}
psnp_w4 %>%
group_by(ea_id, loca) %>%
collapse_ea_psnp(group_vars = c("variable", "locality"))
psnp_w4 %>%
group_by(ea_id, locality) %>%
collapse_ea_psnp(group_vars = c("variable", "locality"))
summ_by_ea_psnp <- function(tbl, name, ...) {
bind_rows(
tbl %>%
group_by(ea_id) %>%
collapse_ea(group_vars = c("variable", "locality")) %>%
mutate(region = "National", wave = name),
tbl %>%
group_by(ea_id, region) %>%
collapse_ea(group_vars = c("variable", "region", "locality")) %>%
mutate(wave = name)
)
}
wave_lab <- c("Wave 4", "Wave 5")
psnp_all_rural <- map(list(psnp_w4, psnp_w5),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_all_rural <- map2(psnp_all_rural, wave_lab, summ_by_ea) %>%
bind_rows()
psnp_ea_all_rural <- map2(psnp_all_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
psnp_w4 %>%
group_by(ea_id, locality) %>%
collapse_ea_psnp(group_vars = c("variable", "locality"))
collapse_ea_psnp <- function(tbl, group_vars = c("variable", "region")) {
tbl %>%
summarise(
# n = n(),
across(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
~max(.x, na.rm = TRUE) ),
.groups = "drop"
) %>%
suppressWarnings() %>%
modify(~ifelse(is.infinite(.), 0, .)) %>%
rename_with(~str_replace(., "hhd_", "ead_"), starts_with("hhd_")) %>%
pivot_longer(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
names_to = "variable", values_to = "value") %>%
group_by(pick(group_vars)) %>%
summarise(
mean = mean(value, na.rm = TRUE),
nobs = sum(!is.na(value)),
.groups = "drop"
)
}
summ_by_ea_psnp <- function(tbl, name, ...) {
bind_rows(
tbl %>%
group_by(ea_id) %>%
collapse_ea(group_vars = c("variable", "locality")) %>%
mutate(region = "National", wave = name),
tbl %>%
group_by(ea_id, region) %>%
collapse_ea(group_vars = c("variable", "region", "locality")) %>%
mutate(wave = name)
)
}
wave_lab <- c("Wave 4", "Wave 5")
psnp_all_rural <- map(list(psnp_w4, psnp_w5),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_all_rural <- map2(psnp_all_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
summ_by_ea_psnp <- function(tbl, name, ...) {
bind_rows(
tbl %>%
group_by(ea_id) %>%
collapse_ea_psnp(group_vars = c("variable", "locality")) %>%
mutate(region = "National", wave = name),
tbl %>%
group_by(ea_id, region) %>%
collapse_ea_psnp(group_vars = c("variable", "region", "locality")) %>%
mutate(wave = name)
)
}
wave_lab <- c("Wave 4", "Wave 5")
psnp_all_rural <- map(list(psnp_w4, psnp_w5),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_all_rural <- map2(psnp_all_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
collapse_ea_psnp
collapse_ea_psnp <- function(tbl, group_vars = c("variable", "region")) {
tbl %>%
summarise(
# n = n(),
across(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
~max(.x, na.rm = TRUE) ),
.groups = "drop"
) %>%
suppressWarnings() %>%
modify(~ifelse(is.infinite(.), 0, .)) %>%
rename_with(~str_replace(., "hhd_", "ead_"), starts_with("hhd_")) %>%
pivot_longer(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
names_to = "variable", values_to = "value") %>%
group_by(pick(group_vars)) %>%
summarise(
mean = mean(value, na.rm = TRUE),
nobs = sum(!is.na(value)),
.groups = "drop"
)
}
summ_by_ea_psnp <- function(tbl, name, ...) {
bind_rows(
tbl %>%
group_by(ea_id) %>%
collapse_ea_psnp(group_vars = c("variable", "locality")) %>%
mutate(region = "National", wave = name),
tbl %>%
group_by(ea_id, region) %>%
collapse_ea_psnp(group_vars = c("variable", "region", "locality")) %>%
mutate(wave = name)
)
}
wave_lab <- c("Wave 4", "Wave 5")
psnp_all_rural <- map(list(psnp_w4, psnp_w5),
~filter(., locality=="Rural") %>% select(-locality))
psnp_all_rural
psnp_panel_rural <- map(list(psnp_w4_panel, psnp_w5_panel),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_panel_rural <- map2(psnp_panel_rural, wave_lab, summ_by_ea) %>%
bind_rows()
psnp_ea_panel_rural <- map2(psnp_panel_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
psnp_ea_rural
collapse_ea_psnp <- function(tbl, group_vars = c("variable", "region")) {
tbl %>%
summarise(
# n = n(),
across(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
~max(.x, na.rm = TRUE) ),
.groups = "drop"
) %>%
suppressWarnings() %>%
modify(~ifelse(is.infinite(.), 0, .)) %>%
rename_with(~str_replace(., "hhd_", "ead_"), starts_with("hhd_")) %>%
pivot_longer(
-any_of(c("household_id", "ea_id", "wave", "region", "locality", "pw_w4", "pw_w5", "pw_panel")),
names_to = "variable", values_to = "value") %>%
group_by(pick(group_vars)) %>%
summarise(
mean = mean(value, na.rm = TRUE),
nobs = sum(!is.na(value)),
.groups = "drop"
)
}
summ_by_ea_psnp <- function(tbl, name, ...) {
bind_rows(
tbl %>%
group_by(ea_id) %>%
collapse_ea_psnp(group_vars = c("variable")) %>%
mutate(region = "National", wave = name),
tbl %>%
group_by(ea_id, region) %>%
collapse_ea_psnp(group_vars = c("variable", "region")) %>%
mutate(wave = name)
)
}
wave_lab <- c("Wave 4", "Wave 5")
psnp_all_rural <- map(list(psnp_w4, psnp_w5),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_all_rural <- map2(psnp_all_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
psnp_panel_rural <- map(list(psnp_w4_panel, psnp_w5_panel),
~filter(., locality=="Rural") %>% select(-locality))
psnp_ea_panel_rural <- map2(psnp_panel_rural, wave_lab, summ_by_ea_psnp) %>%
bind_rows()
psnp_ea_rural <- bind_rows(
psnp_ea_all_rural %>%
mutate(locality = "Rural", sample = "All"),
psnp_ea_panel_rural %>%
mutate(locality = "Rural", sample = "Panel")
) %>%
mutate(label = "PSNP (Direct support + Temporary labor)")
psnp_panel_rural
psnp_ea_panel_rural
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
# load data ----
sect09_com_w4 <- read_dta(
"../supplemental/replication_files/2_raw_data/ESS4_2018-19/Data/sect09_com_w4.dta"
)
w5_dir
ess5_community_new <- read_dta("../3_report_data/ess5_community_new.dta")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/02_2_community_psnp.R", echo=TRUE)
chickpea_tbl <- function(tbl, kab_var, desi_var, pw, hh = TRUE) {
if (hh) {
bind_rows(
tbl %>%
mutate(chickpea = pmax({{kab_var}}, {{desi_var}}, na.rm = TRUE)) %>%
group_by(region) %>%
summarise(
mean_kabuli = weighted.mean({{kab_var}}, w = {{pw}}, na.rm = TRUE),
mean_desi = weighted.mean({{desi_var}}, w = {{pw}}, na.rm = TRUE),
mean_chickpea = weighted.mean(chickpea, w = {{pw}}, na.rm = TRUE),
nobs = sum(!is.na(chickpea)),
.groups = "drop"
),
tbl %>%
mutate(chickpea = pmax({{kab_var}}, {{desi_var}}, na.rm = TRUE)) %>%
summarise(
mean_kabuli = weighted.mean({{kab_var}}, w = {{pw}}, na.rm = TRUE),
mean_desi = weighted.mean({{desi_var}}, w = {{pw}}, na.rm = TRUE),
mean_chickpea = weighted.mean(chickpea, w = {{pw}}, na.rm = TRUE),
nobs = sum(!is.na(chickpea)),
.groups = "drop"
) %>%
mutate(region = "National")
)
} else {
bind_rows(
tbl %>%
mutate(chickpea = pmax({{kab_var}}, {{desi_var}}, na.rm = TRUE)) %>%
group_by(region) %>%
summarise(
mean_kabuli = mean({{kab_var}}, na.rm = TRUE),
mean_desi = mean({{desi_var}}, na.rm = TRUE),
mean_chickpea = mean(chickpea, na.rm = TRUE),
nobs = sum(!is.na(chickpea)),
.groups = "drop"
),
tbl %>%
mutate(chickpea = pmax({{kab_var}}, {{desi_var}}, na.rm = TRUE)) %>%
summarise(
mean_kabuli = mean({{kab_var}}, na.rm = TRUE),
mean_desi = mean({{desi_var}}, na.rm = TRUE),
mean_chickpea = mean(chickpea, na.rm = TRUE),
nobs = sum(!is.na(chickpea)),
.groups = "drop"
) %>%
mutate(region = "National")
)
}
}
w4_dir
# load data ----
wave3_hh <- read_dta("../supplemental/replication_files/3_report_data/wave3_hh.dta")
wave3_hh
wave3_ea <- read_dta("../supplemental/replication_files/3_report_data/wave3_ea.dta")
wave3_ea
w5_dir
?dir.create
# set-up a folder in tmp ----
if (file.exists("../tmp/psnp/")) {
cat("The folder already exists")
} else {
dir.create("../tmp/psnp/")
}
# set-up a folder in tmp ----
if (file.exists("../tmp/chickpea/")) {
cat("The folder already exists")
} else {
dir.create("../tmp/chickpea/")
}
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/02_2_community_psnp.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
wave3_hh
wave3_hh %>% count(region)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/02_2_community_psnp.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
w4_dir
# load data ----
ess4_dna_hh_new <- read_dta("../supplemental/replication_files/3_report_data/ess4_dna_hh_new.dta") %>%
filter(!is.na(maize_cg), !is.na(dtmz)) %>%  # retain only maize
dplyr::select(-c(barley_cg, sorghum_cg)) %>%
recode_region_dna(saq01)
suppressWarnings(
tbl %>%
mutate(
region = recode(
{{region_var}},
`1` = "Tigray",
`3` = "Amhara",
`4` = "Oromia",
`7` = "SNNP",
`13` = "Harar",
`15` = "Dire Dawa"
)
)
)
recode_region_dna <- function(tbl, region_var = region) {
suppressWarnings(
tbl %>%
mutate(
region = recode(
{{region_var}},
`1` = "Tigray",
`3` = "Amhara",
`4` = "Oromia",
`7` = "SNNP",
`13` = "Harar",
`15` = "Dire Dawa"
)
)
)
}
# load data ----
ess4_dna_hh_new <- read_dta("../supplemental/replication_files/3_report_data/ess4_dna_hh_new.dta") %>%
filter(!is.na(maize_cg), !is.na(dtmz)) %>%  # retain only maize
dplyr::select(-c(barley_cg, sorghum_cg)) %>%
recode_region_dna(saq01)
w5_dir
ess5_dna_hh_new <- read_dta("../3_report_data/03_5_ess5_dna_hh.dta") %>%
recode_region_dna()
root
ess5_weights_hh <- read_dta("../2_raw_data/data/HH/ESS5_weights_hh.dta")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/06_4_dynamics_maizeDNA.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/06_4_dynamics_maizeDNA.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
dna_means_hh <- read_csv("../tmp/dynamics/dna_means_hh.csv")
wave5_hh <- read_dta("../3_report_data/wave5_hh_new.dta")
ess5_bounds <- read_dta("../tmp/dynamics/ess5_bounds.dta")
dna_means_hh <- read_csv("../tmp/dynamics/dna_means_hh.csv")
psnp_hh <- read_csv("../tmp/psnp/psnp_hh.csv")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
sect_cover_hh_w4 <- read_dta(
"../supplemental/replication_files/2_raw_data/ESS4_2018-19/Data/sect_cover_hh_w4.dta"
) %>%
mutate_if(is.labelled, as_factor)
adopt_rates_w4_hh <- read_csv("../tmp/adopt_rates/adopt_rates_w4_hh.csv")
adopt_rates_w4_hh <- read_csv("../tmp/adopt_reach/adopt_rates_w4_hh.csv")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_4_adopt_reach_table.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
# load data ----
ess4_hh_all <- read_dta("../tmp/adopt_reach/ess4_hh_all.dta")
# load data ----
ess4_hh_all <- read_dta("../tmp/dynamics/ess4_hh_all.dta")
ess4_bounds <- read_dta("../tmp/adopt_reach/ess4_bounds.dta")
psnp_hh <- read_csv("../tmp/psnp/psnp_hh.csv")
# load data ----
wave5_hh_new <- read_dta("../3_report_data/wave5_hh_new.dta")
ess5_bounds <- read_dta("../tmp/adopt_reach/ess5_bounds.dta")
dna_means_hh <- read_csv("../tmp/dynamics/dna_means_hh.csv")
psnp_hh <- read_csv("../tmp/psnp/psnp_hh.csv")
# load data ----
track_hh <- read_dta("../tmp/dynamics/06_1_track_hh.dta")
adopt_rates_w4_hh <- read_csv("../tmp/adopt_reach/adopt_rates_w4_hh.csv")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
# load data ----
track_hh <- read_dta("../tmp/dynamics/06_1_track_hh.dta")
adopt_rates_w4_hh <- read_csv("../tmp/adopt_reach/adopt_rates_w4_hh.csv")
adopt_rate_dna_w4 <- read_csv("../tmp/adopt_reach/adopt_rate_dna_w4.csv")
adopt_rates_w5_hh <- read_csv("../tmp/adopt_reach/adopt_rates_w5_hh.csv")
adopt_rate_dna_w5 <- read_csv("../tmp/adopt_reach/adopt_rate_dna_w5.csv")
bd_means_w4 <- read_csv("../tmp/adopt_reach/bd_means_w4.csv")
bd_mean_w5 <- read_csv("../tmp/adopt_reach/bd_mean_w5.csv")
source("programs/ggplot_theme_Publication-2.R")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +m
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_4_adopt_reach_table.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
source("programs/ggplot_theme_Publication-2.R")
theme_set(theme_light())
wb_path <- "../2_raw_data/auxiliary/chickpea_agss_area_prod.xlsx"
wb_path
# set-up a folder in tmp ----
if (file.exists("../tmp/chickpea/figures/")) {
cat("The folder already exists")
} else {
dir.create("../tmp/chickpea/figures/")
}
# set-up a folder in tmp ----
if (file.exists("../tmp/chickpea/figures/")) {
cat("The folder already exists")
} else {
dir.create("../tmp/chickpea/figures/")
}
wb_path <- "../2_raw_data/auxiliary/chickpea_agss_area_prod.xlsx"
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_2_chickpea_AgSS.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/01_2_hh_psnp_II.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/02_2_community_psnp.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_1_chickpea_compare.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/06_4_dynamics_maizeDNA.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_2_adopt_reach_innovs_w4.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_3_adopt_reach_innovs_w5.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_4_adopt_reach_table.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/10_5_adopt_reach_figure.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/07_2_chickpea_AgSS.R", echo=TRUE)
wave4_hh <- read_dta("../supplemental/replication_files/3_report_data/wave4_hh_new.dta")
wave4_hh <- read_dta("../supplemental/replication_files/3_report_data/wave4_hh_new.dta")
library(haven)
library(tidyverse)
library(labelled)
wave4_hh <- read_dta("../supplemental/replication_files/3_report_data/wave4_hh_new.dta")
wave5_hh <- read_dta("../3_report_data/wave5_hh_new.dta")
ess4_hh_psnp <- read_dta("../supplemental/replication_files/3_report_data/ess4_hh_psnp.dta")
hh_livestock <- read_dta("../3_report_data/01_6_hh_livestock.dta")
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/06_2_dynamics_adopt_rates.R", echo=TRUE)
vars_w5
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/1_code/06_6_dynamics_new_innovs_w5.R", echo=TRUE)
