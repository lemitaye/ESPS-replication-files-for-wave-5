theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation in\nEthiopia, ESS5 (2021/22) - All households"
)
ggsave(
filename = "../tmp/figures/fig09_all_w5.png",
width = 300,
height = 160,
units = "mm"
)
ess5_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS5 (2021/22) - Panel households"
)
ggsave(
filename = "../tmp/figures/fig09_panel_w5.png",
width = 300,
height = 160,
units = "mm"
)
## Figure 9 for ESS4 ------------
ess4_totals <- bind_rows(
mutate(make_sheet(ess4_cs)$df, sample = "all"),
mutate(make_sheet(ess4_pnl)$df, sample = "panel")
) %>%
select(sample, label, total = Total) %>%
left_join(
bind_rows(adopt_rates_w4_hh, adopt_rate_dna_w4) %>%
distinct(variable, label),
by = "label",
multiple = "all"
) %>%
select(-label) %>%
inner_join(var_labs, by = c("variable" = "variable_w4")) %>%
select(sample, variable, label, type, total)
ess4_totals %>%
filter(sample == "all") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation in\nEthiopia, ESS4 (2018/19) - All households"
)
ggsave(
filename = "../tmp/figures/fig09_all_w4.png",
width = 300,
height = 160,
units = "mm"
)
ess4_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS4 (2018/19) - Panel households"
)
ggsave(
filename = "../tmp/figures/fig09_panel_w4.png",
width = 300,
height = 160,
units = "mm"
)
ess5_totals
ess5_totals %>% count(sample)
ess4_totals %>% count(sample)
adopt_totals <- bind_rows(ess4_totals, ess5_totals)
adopt_totals <- bind_rows(
ess4_totals %>%
mutate(year = "2018/19"),
ess5_totals %>%
mutate(year = "2021/22")
)
adopt_totals %>%
count(year)
adopt_totals %>%
count(sample, year)
ess4_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS4 (2018/19) - Panel households"
)
adopt_totals %>%
filter(sample == "all") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2)
adopt_totals %>%
filter(sample == "all") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS4 (2018/19) - Panel households"
)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS4 (2018/19) - Panel households"
)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
adopt_totals %>%
filter(sample == "all") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - All households"
)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
ggsave(
filename = "../tmp/figures/fig09_panel.png",
width = 300,
height = 297,
units = "mm"
)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = fct_reorder(label, total)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
ggsave(
filename = "../tmp/figures/fig09_panel.png",
width = 300,
height = 297,
units = "mm"
)
ess4_totals %>%
filter(sample = "all")
ess4_totals %>%
filter(sample == "all")
ess4_totals %>%
filter(sample == "all") %>%
arrange(total) %>%
pull(label)
levels <- ess4_totals %>%
filter(sample == "all") %>%
arrange(total) %>%
pull(label)
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
levels <- ess4_arrng %>% union(ess5_totals$label %>% unique())
ess4_arrng <- ess4_totals %>%
filter(sample == "all") %>%
arrange(total) %>%
pull(label)
levels <- ess4_arrng %>% union(ess5_totals$label %>% unique())
levels
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
ess4_arrng[[9]]
ess4_arrng
ess4_arrng[1:6]
ess4_arrng[7:]
ess4_arrng[7:length(ess4_arrng)]
levels <- union( ess4_arrng[1:6], "Chickpea Kabuli varieties", ess4_arrng[7:length(ess4_arrng)])
levels <- c( ess4_arrng[1:6], "Chickpea Kabuli varieties", ess4_arrng[7:length(ess4_arrng)])
levels
ess4_arrng <- ess4_totals %>%
filter(sample == "all") %>%
arrange(total) %>%
pull(label)
ess4_arrng
levels <- c( ess4_arrng[1:6], "Chickpea Kabuli varieties", ess4_arrng[7:length(ess4_arrng)])
levels
ess4_arrng <- ess4_totals %>%
filter(sample == "all") %>%
arrange(total) %>%
pull(label)
ess4_arrng
levels <- c( ess4_arrng[1:12], "Chickpea Kabuli varieties", ess4_arrng[13:length(ess4_arrng)])
levels
adopt_totals %>%
filter(sample == "panel") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - Panel households"
)
ggsave(
filename = "../tmp/figures/fig09_panel.png",
width = 300,
height = 297,
units = "mm"
)
adopt_totals %>%
filter(sample == "all") %>%
mutate(label = factor(label, levels = levels)) %>%
ggplot(aes(label, total, fill = type)) +
geom_col() +
facet_wrap(~year, nrow = 2) +
scale_y_continuous(labels = unit_format(unit = "", scale = 1e-6)) +
theme_Publication() +
scale_fill_Publication() +
theme(
axis.text.x = element_text(
angle = 90,
size = 10,
hjust = 1,
vjust = .4
),
axis.title.y = element_text(size = 11),
legend.position = "top"
) +
labs(
y = "Number of rural households (millions)",
x = "",
fill = "",
title = "Number of rural households adopting each CGIAR-related innovation\nin Ethiopia, ESS - All households"
)
ggsave(
filename = "../tmp/figures/fig09_all.png",
width = 300,
height = 297,
units = "mm"
)
?stargazer::stargazer
main_tab_df <- data.frame(
script = c("09_1_tables_adopt_rates.do"),
datasets = c(""),
int_table = c("09_1_ess5_adoption_rates.xml"),
supp_table = c(""),
report_table = c("")
)
main_tab_df
# load packages ----
library(tidyverse)
library(kableExtra)
main_tab_df <- data.frame(
script = c("09_1_tables_adopt_rates.do"),
datasets = c(""),
int_table = c("09_1_ess5_adoption_rates.xml"),
supp_table = c(""),
report_table = c("")
) %>%
as_tibble()
main_tab_df
main_tab_df
?column_spec
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/5_analysis/tab_rep_file.R", echo=TRUE)
source("C:/Users/l.daba/SPIA Dropbox/SPIA General/5. OBJ.3 - Data collection/Country teams/Ethiopia/LSMS_W5/5_analysis/tab_rep_file.R", echo=TRUE)
main_tab_df
